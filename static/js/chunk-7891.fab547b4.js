(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7891"],{"/YWf":function(e,t,a){},Ampy:function(e,t,a){},BWRF:function(e,t,a){"use strict";var i=a("/YWf");a.n(i).a},Gsba:function(e,t,a){"use strict";var i={name:"Mysearch",props:{hidden:{type:Boolean,default:!1},placeholder:{type:String,default:"请输入关键字(模糊搜索)"},buttonName:{type:String,default:"搜索"},value:{type:String,default:""}},data:function(){return{new_search:this.value}},methods:{to_search:function(){this.$emit("searchData",this.new_search)},to_input:function(){this.$emit("input",this.new_search)}}},n=(a("qq43"),a("KHd+")),r=Object(n.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:{hidden:e.hidden}},[a("el-input",{attrs:{placeholder:e.placeholder,size:"small",clearable:""},on:{input:e.to_input,clear:e.to_search},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.to_search(t):null}},model:{value:e.new_search,callback:function(t){e.new_search=t},expression:"new_search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.to_search},slot:"append"},[e._v(e._s(e.buttonName))])],1)],1)},[],!1,null,"d300708c",null);r.options.__file="index2.vue";t.a=r.exports},MbGq:function(e,t,a){"use strict";var i=a("FyfS"),n=a.n(i),r=a("eivq"),s={name:"SelectDepart",components:{},model:{prop:"value",event:"change"},props:{placeholder:{type:String,default:"请点击选择部门"},title:{type:String,default:"选择部门"},value:{type:[String,Number],required:!1,default:void 0},modalWidth:{type:String,default:"40%",required:!1},multi:{type:Boolean,default:!1,required:!1},store:{type:[String,Number],default:"id",required:!1},text:{type:String,default:"depart_name",required:!1}},data:function(){return{treeData:[],defaultProps:{children:"children",label:"depart_name"},checkedKeys:[],visible:!1,storeVals:"",textVals:""}},computed:{},watch:{value:function(e){this.initComp()}},created:function(){this.querytreeData()},mounted:function(){this.initComp()},methods:{querytreeData:function(){var e=this;Object(r.b)("/departTree/").then(function(t){0===t.errorCode&&(e.treeData=t.data)})},initComp:function(e){this.queryById(this.value)},queryById:function(e){var t=this;e?Object(r.b)("/depart/"+e+"/").then(function(e){t.textVals=e.data.depart_name}).catch(function(e){t.textVals="",console.log(e)}):this.textVals=""},handleNodeClick:function(e){},changeCheck:function(e){this.multi||this.$refs.tree.setCheckedKeys([e.id])},getCheckedNodes:function(){console.log(this.$refs.tree.getCheckedNodes())},getCheckedKeys:function(){this.checkedKeys=this.$refs.tree.getCheckedKeys()},setCheckedKeys:function(){this.$refs.tree.setCheckedKeys([3])},getCheckedRows:function(e){var t=function e(t,a){var i=!0,r=!1,s=void 0;try{for(var l,o=n()(t);!(i=(l=o.next()).done);i=!0){var c=l.value;if(c.id===a)return c;if(c.children instanceof Array){var u=e(c.children,a);if(null!=u)return u}}}catch(e){r=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(r)throw s}}return null},a=[],i=!0,r=!1,s=void 0;try{for(var l,o=n()(e);!(i=(l=o.next()).done);i=!0){var c=l.value,u=t(this.treeData,c);null!=u&&a.push(u)}}catch(e){r=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(r)throw s}}return a},getCheckName:function(e){var t=[];return e.forEach(function(e){t.push(e.depart_name)}),t.join(",")},openModal:function(){var e=this;this.visible=!0,this.$nextTick(function(){e.value&&e.$refs.tree.setCheckedKeys([e.value])})},handleSubmit:function(){if(this.getCheckedKeys(),this.checkedKeys&&0!==this.checkedKeys.length){var e=this.getCheckedRows(this.checkedKeys);this.textVals=this.getCheckName(e),this.$emit("change",this.checkedKeys.join(this.checkedKeys))}else this.$emit("change","");this.handleClear()},handleCancel:function(){this.handleClear()},handleClear:function(){this.visible=!1,this.checkedKeys=[]},handleEmpty:function(){this.$emit("change","")}}},l=(a("cHlN"),a("KHd+")),o=Object(l.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-input",{attrs:{placeholder:e.placeholder,size:"small",readonly:""},on:{focus:e.openModal},model:{value:e.textVals,callback:function(t){e.textVals=t},expression:"textVals"}},[e.value?a("i",{staticClass:"el-icon-circle-close",attrs:{slot:"suffix"},on:{click:e.handleEmpty},slot:"suffix"}):e._e()]),e._v(" "),a("el-dialog",{attrs:{visible:e.visible,title:e.title,width:"300px","append-to-body":"",center:""},on:{"update:visible":function(t){e.visible=t}}},[a("el-tree",{ref:"tree",attrs:{data:e.treeData,props:e.defaultProps,"check-strictly":!0,"expand-on-click-node":!1,"show-checkbox":"","node-key":"id","default-expand-all":""},on:{check:e.changeCheck,"node-click":e.handleNodeClick}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleSubmit}},[e._v("确 定")])],1)],1)],1)},[],!1,null,"781c08e4",null);o.options.__file="SelectDepart.vue";t.a=o.exports},bTnH:function(e,t,a){"use strict";var i=a("rpGZ");a.n(i).a},cHlN:function(e,t,a){"use strict";var i=a("hSgb");a.n(i).a},eivq:function(e,t,a){"use strict";a.d(t,"b",function(){return n}),a.d(t,"d",function(){return r}),a.d(t,"c",function(){return s}),a.d(t,"a",function(){return l});var i=a("t3Un");function n(e,t){return Object(i.a)({url:e,method:"get",params:t})}function r(e,t){return Object(i.a)({url:e,method:"post",data:t})}function s(e,t){return Object(i.a)({url:e,method:"patch",data:t})}function l(e,t){return Object(i.a)({url:e,method:"delete",data:t})}},hSgb:function(e,t,a){},qq43:function(e,t,a){"use strict";var i=a("Ampy");a.n(i).a},rpGZ:function(e,t,a){},sSdI:function(e,t,a){"use strict";a.r(t);a("Q2AE");var i=a("eivq"),n=a("Gsba"),r=a("MbGq"),s={name:"chargeSum",components:{Mysearch:n.a,SelectDepart:r.a},data:function(){return{page_datas:[],gameList:[],userList:[],allUserList:[],my_pagination:{}}},computed:{isGetUser:function(){return["SuperAdmin","Admin","NormalUser"].includes(this.$store.getters.user_obj.group.group_type)||this.$store.getters.auth_json.user.auth_list},isShowAggregate:function(){return["SuperAdmin","Admin"].includes(this.$store.getters.user_obj.group.group_type)}},created:function(){this.get_need_data(),this.get_authGame_data(),this.get_user_data()},methods:{get_need_data:function(){var e=this,t={user_id:this.my_pagination.user_id?this.my_pagination.user_id.join():void 0,game_id:this.my_pagination.game_id?this.my_pagination.game_id.join():void 0,depart_id:this.my_pagination.depart_id||void 0,start_time:this.my_pagination.start_time,end_time:this.my_pagination.end_time,isAggregate:this.my_pagination.isAggregate};Object(i.b)("/chargeSum/",t).then(function(t){var a=t.data;e.page_datas=a,e.my_pagination.count=t.count})},get_authGame_data:function(e){var t=this;Object(i.b)("/authGame/",e).then(function(e){t.gameList=t.distinctGame(e.data)})},distinctGame:function(e){var t=[],a=[];return e.forEach(function(e){a.includes(e.game)||(a.push(e.game),t.push(e))}),t},get_user_data:function(e){var t=this;Object(i.b)("/departUser/",e).then(function(e){t.userList=e.data,t.allUserList=e.data})},changeAggregate:function(e){this.my_pagination.user_id=[],this.userList=e?this.allUserList.filter(function(e){return"SecondaryDealer"!=e.group__group_type}):this.allUserList},getSummaries:function(e){var t=e.columns,a=e.data,i=[];return t.forEach(function(e,t){if(0!==t){var n=a.map(function(t){return Number(t[e.property])});n.every(function(e){return isNaN(e)})?i[t]="N/A":(i[t]=n.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),i[t]+=" 元")}else i[t]="总额"}),i},to_search:function(){this.my_pagination.page=1,this.get_need_data(this.my_pagination)}}},l=(a("bTnH"),a("BWRF"),a("KHd+")),o=Object(l.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{staticClass:"search_form_wrapper_small",attrs:{inline:!0,size:"mini","label-width":"50px","label-position":"right"}},[a("el-button",{staticClass:"btn-form-item",attrs:{type:"primary",size:"mini"},on:{click:e.to_search}},[e._v("搜索")]),e._v(" "),a("el-form-item",{attrs:{label:"用户:"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",multiple:"",placeholder:"请选择用户",filterable:"",clearable:""},model:{value:e.my_pagination.user_id,callback:function(t){e.$set(e.my_pagination,"user_id",t)},expression:"my_pagination.user_id"}},e._l(e.allUserList,function(e){return a("el-option",{key:e.id,attrs:{label:e.username,value:e.id}})}))],1),e._v(" "),e.isShowAggregate?a("el-form-item",{attrs:{label:"部门:",prop:"depart_id"}},[a("SelectDepart",{model:{value:e.my_pagination.depart_id,callback:function(t){e.$set(e.my_pagination,"depart_id",t)},expression:"my_pagination.depart_id"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"游戏:"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",multiple:"",placeholder:"请选择游戏",filterable:"",clearable:""},model:{value:e.my_pagination.game_id,callback:function(t){e.$set(e.my_pagination,"game_id",t)},expression:"my_pagination.game_id"}},e._l(e.gameList,function(e){return a("el-option",{key:e.game,attrs:{label:e.game_name_cn,value:e.game}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"开始:"}},[a("el-date-picker",{staticClass:"time-picker",attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"充值开始日期"},model:{value:e.my_pagination.start_time,callback:function(t){e.$set(e.my_pagination,"start_time",t)},expression:"my_pagination.start_time"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束:"}},[a("el-date-picker",{staticClass:"time-picker",attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"充值结束日期"},model:{value:e.my_pagination.end_time,callback:function(t){e.$set(e.my_pagination,"end_time",t)},expression:"my_pagination.end_time"}})],1)],1),e._v(" "),a("div",{staticClass:"tips"},[e._v("提示：默认统计最近7天的数据，不包括当天。")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.page_datas,size:"mini","show-summary":"",border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"game__game_name_cn",label:"游戏名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user__username",label:"用户名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"day",label:"日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"charge_value",label:"金额"}})],1)],1)},[],!1,null,"69c3721d",null);o.options.__file="chargeSum.vue";t.default=o.exports}}]);