(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5f55"],{"0VWa":function(e,t,a){"use strict";a.r(t);var i=a("gDS+"),r=a.n(i),n=(a("Q2AE"),a("eivq")),l=a("Gsba"),o=a("Mz3J"),s={name:"price",components:{Mysearch:l.a,Pagination:o.a},data:function(){return{page_datas:[],gameList:[],chargetypeList:[],testList:[],centerDialog:!1,centerDialog_patch:!1,centerDialog_delete:!1,my_pagination:{page:1,page_size:10,count:0,search:"",search_type:""},ruleForm:{status:1},ruleForm_patch:{},rules:{game:[{required:!0,message:"请选择游戏",trigger:"change"}],charge_type:[{required:!0,message:"请选择充值类型",trigger:"change"}]},rules_patch:{},delete_data:{}}},computed:{isGetUser:function(){return["SuperAdmin","Admin"].includes(this.$store.getters.user_obj.group.group_type)||this.$store.getters.auth_json.user.auth_list}},created:function(){this.get_need_data(this.my_pagination),this.get_authGame_data(),this.get_chargetype_data()},methods:{get_need_data:function(e){var t=this;Object(n.b)("/price/",e).then(function(e){var a=e.data;t.page_datas=a,t.my_pagination.count=e.count})},get_chargetype_data:function(e){var t=this;Object(n.b)("/chargetype/",e).then(function(e){t.chargetypeList=e.data})},get_authGame_data:function(e){var t=this;Object(n.b)("/authGame/",e).then(function(e){t.gameList=t.distinctGame(e.data)})},distinctGame:function(e){var t=[],a=[];return e.forEach(function(e){a.includes(e.game)||(a.push(e.game),t.push(e))}),t},post_need_data:function(e){var t=this;Object(n.d)("/price/",e).then(function(e){e.data;t.centerDialog=!1,t.$refs.ruleForm.resetFields(),t.$message({showClose:!0,message:"新增成功！",type:"success"}),t.get_need_data(t.my_pagination)})},patch_need_data:function(e){var t=this;Object(n.c)("/price/"+e.id+"/",e).then(function(e){e.data;t.centerDialog_patch=!1,t.$refs.ruleForm_patch.resetFields(),t.$message({showClose:!0,message:"修改成功！",type:"success"}),t.get_need_data(t.my_pagination)})},delete_need_data:function(e){var t=this;Object(n.a)("/price/"+e.id+"/",e).then(function(e){e.data;t.centerDialog_delete=!1,t.$message({showClose:!0,message:"删除成功！",type:"success"}),t.get_need_data(t.my_pagination)})},submitForm:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return console.log("error submit!!"),!1;"ruleForm"==e?t.post_need_data(t.ruleForm):t.patch_need_data(t.ruleForm_patch)})},resetForm:function(e){this.centerDialog=!1,this.centerDialog_patch=!1,this.$refs[e].resetFields()},delete_data_fuc:function(e){this.delete_data=e,this.centerDialog_delete=!0},new_data:function(){this.centerDialog=!0},true_delete:function(){this.delete_need_data(this.delete_data)},edit_data:function(e){this.ruleForm_patch=JSON.parse(r()(e)),this.centerDialog_patch=!0},to_search:function(){this.my_pagination.page=1,this.get_need_data(this.my_pagination)},pag_change:function(){this.get_need_data(this.my_pagination)},search_change:function(){this.get_need_data(this.my_pagination)},my_change:function(e){this.my_pagination.page=1,this.my_pagination.search_type=e,this.get_need_data(this.my_pagination)}}},c=(a("d05V"),a("9cv2"),a("KHd+")),u=Object(c.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{staticClass:"search_form_wrapper_small",attrs:{inline:!0,size:"mini","label-width":"90px","label-position":"right"}},[a("div",{staticClass:"btn-form-item"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.to_search}},[e._v(" 搜索")]),e._v(" "),"SuperAdmin"===e.$store.getters.user_obj.group.group_type||e.$store.getters.auth_json.price.auth_create?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.new_data}},[e._v("新增")]):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"充值类型:"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"请选择充值类型",filterable:"",clearable:""},model:{value:e.my_pagination.charge_type_id,callback:function(t){e.$set(e.my_pagination,"charge_type_id",t)},expression:"my_pagination.charge_type_id"}},e._l(e.chargetypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.type_name_cn,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"游戏:"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"请选择游戏",filterable:"",clearable:""},model:{value:e.my_pagination.game_id,callback:function(t){e.$set(e.my_pagination,"game_id",t)},expression:"my_pagination.game_id"}},e._l(e.gameList,function(e){return a("el-option",{key:e.game,attrs:{label:e.game_name_cn,value:e.game}})}))],1)],1),e._v(" "),a("div",{staticClass:"tips"},[e._v("提示：这里没有配置的游戏就采用充值类型中默认的值。")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.page_datas,size:"mini",border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"game_name_cn",label:"游戏名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"charge_type_name_cn",label:"充值类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"charge_value",label:"金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"award_days",label:"赠送天数"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return"SuperAdmin"===e.$store.getters.user_obj.group.group_type||e.$store.getters.auth_json.price.auth_update?[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.edit_data(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.delete_data_fuc(t.row)}}},[e._v("删除")])]:void 0}}])})],1),e._v(" "),a("br"),e._v(" "),a("pagination",{attrs:{total:e.my_pagination.count,page:e.my_pagination.page,page_size:e.my_pagination.page_size},on:{"update:page":function(t){e.$set(e.my_pagination,"page",t)},"update:page_size":function(t){e.$set(e.my_pagination,"page_size",t)},pagination:e.pag_change}}),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{visible:e.centerDialog,"close-on-press-escape":!1,"close-on-click-modal":!1,title:"新增",width:"50%",center:""},on:{"update:visible":function(t){e.centerDialog=t}}},[a("div",[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"游戏名称",prop:"game"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"请选择游戏",filterable:"",clearable:""},model:{value:e.ruleForm.game,callback:function(t){e.$set(e.ruleForm,"game",t)},expression:"ruleForm.game"}},e._l(e.gameList,function(e){return a("el-option",{key:e.game,attrs:{label:e.game_name_cn,value:e.game}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"充值类型",prop:"charge_type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"请选择充值类型",filterable:"",clearable:""},model:{value:e.ruleForm.charge_type,callback:function(t){e.$set(e.ruleForm,"charge_type",t)},expression:"ruleForm.charge_type"}},e._l(e.chargetypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.type_name_cn,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"充值金额",prop:"charge_value"}},[a("el-input",{attrs:{size:"small"},model:{value:e.ruleForm.charge_value,callback:function(t){e.$set(e.ruleForm,"charge_value",t)},expression:"ruleForm.charge_value"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"赠送天数",prop:"award_days"}},[a("el-input",{attrs:{size:"small"},model:{value:e.ruleForm.award_days,callback:function(t){e.$set(e.ruleForm,"award_days",t)},expression:"ruleForm.award_days"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"启用状态",required:""}},[a("el-switch",{attrs:{size:"small","active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{visible:e.centerDialog_delete,title:"确认删除",width:"30%",center:""},on:{"update:visible":function(t){e.centerDialog_delete=t}}},[a("span",[e._v("是否确认删除，删除后不可恢复？")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.centerDialog_delete=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.true_delete}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{visible:e.centerDialog_patch,"close-on-press-escape":!1,"close-on-click-modal":!1,title:"编辑",width:"50%",center:""},on:{"update:visible":function(t){e.centerDialog_patch=t}}},[a("div",[a("el-form",{ref:"ruleForm_patch",attrs:{model:e.ruleForm_patch,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"游戏名称",prop:"game"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"请选择游戏",filterable:"",clearable:""},model:{value:e.ruleForm_patch.game,callback:function(t){e.$set(e.ruleForm_patch,"game",t)},expression:"ruleForm_patch.game"}},e._l(e.gameList,function(e){return a("el-option",{key:e.game,attrs:{label:e.game_name_cn,value:e.game}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"充值类型",prop:"charge_type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"请选择充值类型",filterable:"",clearable:""},model:{value:e.ruleForm_patch.charge_type,callback:function(t){e.$set(e.ruleForm_patch,"charge_type",t)},expression:"ruleForm_patch.charge_type"}},e._l(e.chargetypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.type_name_cn,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"充值金额",prop:"charge_value"}},[a("el-input",{attrs:{size:"small"},model:{value:e.ruleForm_patch.charge_value,callback:function(t){e.$set(e.ruleForm_patch,"charge_value",t)},expression:"ruleForm_patch.charge_value"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"赠送天数",prop:"award_days"}},[a("el-input",{attrs:{size:"small"},model:{value:e.ruleForm_patch.award_days,callback:function(t){e.$set(e.ruleForm_patch,"award_days",t)},expression:"ruleForm_patch.award_days"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"启用状态",prop:"status"}},[a("el-switch",{attrs:{size:"small","active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.ruleForm_patch.status,callback:function(t){e.$set(e.ruleForm_patch,"status",t)},expression:"ruleForm_patch.status"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.resetForm("ruleForm_patch")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.submitForm("ruleForm_patch")}}},[e._v("确 定")])],1)])],1)},[],!1,null,"1f9cc39e",null);u.options.__file="price.vue";t.default=u.exports},"6jdH":function(e,t,a){},"9cv2":function(e,t,a){"use strict";var i=a("6jdH");a.n(i).a},Ampy:function(e,t,a){},Gsba:function(e,t,a){"use strict";var i={name:"Mysearch",props:{hidden:{type:Boolean,default:!1},placeholder:{type:String,default:"请输入关键字(模糊搜索)"},buttonName:{type:String,default:"搜索"},value:{type:String,default:""}},data:function(){return{new_search:this.value}},methods:{to_search:function(){this.$emit("searchData",this.new_search)},to_input:function(){this.$emit("input",this.new_search)}}},r=(a("qq43"),a("KHd+")),n=Object(r.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:{hidden:e.hidden}},[a("el-input",{attrs:{placeholder:e.placeholder,size:"small",clearable:""},on:{input:e.to_input,clear:e.to_search},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.to_search(t):null}},model:{value:e.new_search,callback:function(t){e.new_search=t},expression:"new_search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.to_search},slot:"append"},[e._v(e._s(e.buttonName))])],1)],1)},[],!1,null,"d300708c",null);n.options.__file="index2.vue";t.a=n.exports},Mz3J:function(e,t,a){"use strict";var i={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},page_size:{type:Number,default:10},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.page_size},set:function(e){this.$emit("update:page_size",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,page_size:e})},handleCurrentChange:function(e){this.$emit("pagination",{page:e,page_size:this.pageSize})}}},r=(a("e+pk"),a("KHd+")),n=Object(r.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:{hidden:e.hidden}},[a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},[],!1,null,"88e53666",null);n.options.__file="index.vue";t.a=n.exports},OiJS:function(e,t,a){},XYig:function(e,t,a){},d05V:function(e,t,a){"use strict";var i=a("XYig");a.n(i).a},"e+pk":function(e,t,a){"use strict";var i=a("OiJS");a.n(i).a},eivq:function(e,t,a){"use strict";a.d(t,"b",function(){return r}),a.d(t,"d",function(){return n}),a.d(t,"c",function(){return l}),a.d(t,"a",function(){return o});var i=a("t3Un");function r(e,t){return Object(i.a)({url:e,method:"get",params:t})}function n(e,t){return Object(i.a)({url:e,method:"post",data:t})}function l(e,t){return Object(i.a)({url:e,method:"patch",data:t})}function o(e,t){return Object(i.a)({url:e,method:"delete",data:t})}},"gDS+":function(e,t,a){e.exports={default:a("oh+g"),__esModule:!0}},"oh+g":function(e,t,a){var i=a("WEpk"),r=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},qq43:function(e,t,a){"use strict";var i=a("Ampy");a.n(i).a}}]);