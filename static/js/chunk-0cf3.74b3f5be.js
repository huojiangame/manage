(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0cf3"],{"0pip":function(e,t,r){"use strict";var a=r("nxq8");r.n(a).a},Mz3J:function(e,t,r){"use strict";var a={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},page_size:{type:Number,default:10},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.page_size},set:function(e){this.$emit("update:page_size",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,page_size:e})},handleCurrentChange:function(e){this.$emit("pagination",{page:e,page_size:this.pageSize})}}},i=(r("e+pk"),r("KHd+")),s=Object(i.a)(a,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:{hidden:e.hidden}},[r("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},[],!1,null,"88e53666",null);s.options.__file="index.vue";t.a=s.exports},OiJS:function(e,t,r){},W839:function(e,t,r){},XbZe:function(e,t,r){"use strict";r.r(t);var a=r("P2sY"),i=r.n(a),s=r("eivq"),n=r("Mz3J"),o={name:"AwardChargeModal",components:{Pagination:n.a},data:function(){return{dialogVisible:!1,gridData:[],radioId:null,my_pagination:{page:1,page_size:10,count:0},currentRow:{}}},computed:{isMobile:function(){return"mobile"===this.$store.state.app.device}},watch:{dialogVisible:function(e){e&&this.getAwardChargeList(this.my_pagination)}},created:function(){},mounted:function(){},methods:{getAwardChargeList:function(e){var t=this;Object(s.b)("/awardChargeList/",e).then(function(e){t.gridData=e.data,t.my_pagination.count=e.count})},pag_change:function(){this.getAwardChargeList(this.my_pagination)},rowClick:function(e){this.radioId=e.id,this.currentRow=e},handleOk:function(){this.$emit("ok",this.currentRow),this.dialogVisible=!1}}},l=(r("pxQj"),r("KHd+")),u=Object(l.a)(o,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"选择用于赠送的充值记录",visible:e.dialogVisible,fullscreen:e.isMobile},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-table",{attrs:{data:e.gridData,size:"mini",border:"",stripe:""},on:{"row-click":e.rowClick}},[r("el-table-column",{attrs:{label:"",width:"35"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-radio",{attrs:{label:t.row.id},model:{value:e.radioId,callback:function(t){e.radioId=t},expression:"radioId"}},[e._v(" ")])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"chargetype",label:"充值类型"}}),e._v(" "),r("el-table-column",{attrs:{prop:"game",label:"游戏"}}),e._v(" "),r("el-table-column",{attrs:{prop:"userid","show-overflow-tooltip":"",label:"续费ID"}}),e._v(" "),r("el-table-column",{attrs:{prop:"server_id",label:"服务器"}}),e._v(" "),r("el-table-column",{attrs:{prop:"charge_value",label:"金额",width:"50"}}),e._v(" "),r("el-table-column",{attrs:{prop:"user",label:"用户"}}),e._v(" "),r("el-table-column",{attrs:{prop:"charge_time",label:"充值时间",width:"135"}})],1),e._v(" "),r("div",{staticClass:"page-wrap"},[r("pagination",{attrs:{total:e.my_pagination.count,page:e.my_pagination.page,page_size:e.my_pagination.page_size},on:{"update:page":function(t){e.$set(e.my_pagination,"page",t)},"update:page_size":function(t){e.$set(e.my_pagination,"page_size",t)},pagination:e.pag_change}})],1),e._v(" "),r("div",{staticClass:"dialog-footer"},[r("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleOk}},[e._v("确 定")])],1)],1)},[],!1,null,"3b3ffcb0",null);u.options.__file="AwardChargeModal.vue";var c=u.exports,p={server_id:null,userid:null,game:null,days:null,fuzhu_vip:0,charge_value:null,chargetype:null,content:""},d={name:"ChargeHelper",components:{Pagination:n.a,AwardChargeModal:c},data:function(){return{centerDialog_post:!1,centerDialog_delete:!1,centerDialog_patch:!1,centerDialog_parse:!1,chargeLoding:!1,awardTypeChecked:!1,chargetypeList:[],gameList:[],customTypeChecked:!1,transferTypeChecked:!1,result:[],copyText:"",parseText:"",showResult:!1,awardGame:"",awardCharge:{},ruleForm:i()({},p),rules:{server_id:[{required:!0,message:"请输入服务器ID",trigger:"blur"}],userid:[{required:!0,message:"请输入续费ID",trigger:"blur"}],game:[{required:!0,message:"请选择游戏",trigger:"change"}],chargetypeAward:[{required:!0,message:"请选择用于赠送的充值记录",trigger:"change"}],days:[{required:!0,message:"请输入充值天数",trigger:"blur"}],fuzhu_vip:[{required:!0,message:"请输入选择辅助类型",trigger:"change"}],charge_value:[{required:!0,message:"请输入充值金额",trigger:"blur"}],content:[{required:!0,message:"请输入自定义原因",trigger:"blur"}],out_userid:[{required:!0,message:"请输入转出续费ID",trigger:"blur"}],out_server_id:[{required:!0,message:"请输入转出服务器ID",trigger:"blur"}]},ruleForm_patch:{},rules_patch:{},delete_data:{},my_pagination:{page:1,page_size:10,count:0,search:"",search_type:""}}},computed:{isMobile:function(){return"mobile"===this.$store.state.app.device}},created:function(){this.get_mygame_data(),this.get_chargetype_data()},methods:{get_mygame_data:function(e){var t=this;Object(s.b)("/authGame/",e).then(function(e){t.gameList=t.distinctGame(e.data)})},openAwardModal:function(){this.$refs.AwardChargeModal.dialogVisible=!0},handleOk:function(e){this.awardCharge=e,this.$set(this.ruleForm,"award",e.id),this.$set(this.ruleForm,"chargetypeAward",e.chargetype)},distinctGame:function(e){var t=[],r=[];return e.forEach(function(e){r.includes(e.game)||(r.push(e.game),t.push(e))}),t},get_chargetype_data:function(){var e=this;Object(s.b)("/chargetype/",{use_type:1}).then(function(t){e.chargetypeList=t.data,e.ruleForm.chargetype=e.chargetypeList[0].id})},post_need_data:function(e){var t=this;this.centerDialog_post=!1,this.customTypeChecked||(delete e.days,delete e.fuzhu_vip,delete e.charge_value,delete e.content),this.chargeLoding=!0,Object(s.d)("/charge/",e).then(function(e){t.chargeLoding=!1;var r=e.data;t.result=JSON.parse(r.result.replace(/'/g,'"')),t.formatResult(),t.showResult=!0,t.$message({showClose:!0,message:"充值成功！",type:"success"})}).catch(function(e){console.log("err",e),t.chargeLoding=!1})},formatResult:function(){var e=this;this.copyText="",this.result&&this.result.length>0&&this.result.forEach(function(t){e.copyText+=t+"\n"})},changeChargetype:function(e){var t=this.chargetypeList.find(function(t){return t.id==e});this.customTypeChecked=1===t.decide_type,this.awardTypeChecked=2===t.decide_type,this.transferTypeChecked=3===t.decide_type,this.awardTypeChecked||(delete this.ruleForm.award,delete this.ruleForm.chargetypeAward)},submitForm:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.awardTypeChecked&&e.gameList.find(function(t){return t.game===e.ruleForm.game}).game_name_cn!==e.awardCharge.game?e.$message.error("所选充值记录的游戏和要赠送的游戏不同"):e.transferTypeChecked&&e.ruleForm.userid===e.ruleForm.out_userid&&e.ruleForm.server_id===e.ruleForm.out_server_id?e.$message.error("转入和转出的用户不能相同"):e.centerDialog_post=!0})},queryUser:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.get_query_data(e.ruleForm)})},checkTransfer:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.get_transfer_data()})},get_transfer_data:function(){var e=this;Object(s.b)("/checktransfer/",this.ruleForm).then(function(t){e.result=t.data.result,e.formatResult(),e.showResult=!0,e.$message({showClose:!0,message:"查询成功！",type:"success"})})},get_query_data:function(e){var t=this;Object(s.b)("/querGameUser/",e).then(function(e){t.result=e.data.result,t.formatResult(),t.showResult=!0,t.$message({showClose:!0,message:"查询成功！",type:"success"})})},copyResult:function(){var e=this;this.$copyText(this.copyText).then(function(t){e.$message({showClose:!0,message:"复制成功",type:"success"})},function(t){e.$message({showClose:!0,message:"复制失败",type:"error"})})},clearResult:function(){this.result=[],this.showResult=!1,this.$refs.ruleForm.resetFields()},true_post:function(){this.post_need_data(this.ruleForm)},parseUser:function(){this.centerDialog_parse=!0,this.parseText=""},true_parse:function(){if(this.parseText){var e=this.parseText.split(",");this.ruleForm.server_id=e[0].split(":")[1],this.ruleForm.userid=e[1].split(":")[1];var t=e[2]?e[2].split(":")[1]:"";this.findGameByName(t)}this.centerDialog_parse=!1},findGameByName:function(e){var t=this.gameList.find(function(t){return t.game_name==e});this.ruleForm.game=t?t.game:null}}},g=(r("rGxX"),r("0pip"),Object(l.a)(d,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container charge-helper"},[r("div",[r("div",{staticClass:"chargetype-wrap"},[r("el-radio-group",{staticStyle:{"margin-bottom":"10px"},attrs:{size:"mini"},on:{change:e.changeChargetype},model:{value:e.ruleForm.chargetype,callback:function(t){e.$set(e.ruleForm,"chargetype",t)},expression:"ruleForm.chargetype"}},e._l(e.chargetypeList,function(t,a){return r("el-radio",{key:a,attrs:{label:t.id,border:""}},[e._v(e._s(t.type_name_cn))])}))],1),e._v(" "),r("el-form",{ref:"ruleForm",staticClass:"form-wrap",class:{formwidth:!e.isMobile},attrs:{model:e.ruleForm,rules:e.rules,size:"mini","label-width":"110px"}},[r("el-form-item",{attrs:{label:e.transferTypeChecked?"转入续费ID":"续费ID",prop:"userid"}},[r("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.userid,callback:function(t){e.$set(e.ruleForm,"userid","string"==typeof t?t.trim():t)},expression:"ruleForm.userid"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.transferTypeChecked?"转入服务器ID":"服务器ID",prop:"server_id"}},[r("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.server_id,callback:function(t){e.$set(e.ruleForm,"server_id","string"==typeof t?t.trim():t)},expression:"ruleForm.server_id"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"游戏名称",prop:"game"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择游戏",filterable:"",clearable:""},model:{value:e.ruleForm.game,callback:function(t){e.$set(e.ruleForm,"game",t)},expression:"ruleForm.game"}},e._l(e.gameList,function(e){return r("el-option",{key:e.game,attrs:{label:e.game_name_cn,value:e.game}})}))],1),e._v(" "),e.transferTypeChecked?r("el-form-item",{attrs:{label:"转出续费ID",prop:"out_userid"}},[r("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.out_userid,callback:function(t){e.$set(e.ruleForm,"out_userid","string"==typeof t?t.trim():t)},expression:"ruleForm.out_userid"}})],1):e._e(),e._v(" "),e.transferTypeChecked?r("el-form-item",{attrs:{label:"转出服务器ID",prop:"out_server_id"}},[r("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.out_server_id,callback:function(t){e.$set(e.ruleForm,"out_server_id","string"==typeof t?t.trim():t)},expression:"ruleForm.out_server_id"}})],1):e._e(),e._v(" "),e.awardTypeChecked?r("el-form-item",{attrs:{label:"充值记录",prop:"chargetypeAward"}},[r("el-input",{attrs:{placeholder:"请选择用于赠送的充值记录",clearable:""},on:{focus:e.openAwardModal},model:{value:e.ruleForm.chargetypeAward,callback:function(t){e.$set(e.ruleForm,"chargetypeAward",t)},expression:"ruleForm.chargetypeAward"}})],1):e._e(),e._v(" "),e.awardTypeChecked?r("div",{staticClass:"tips"},[e._v("\n        赠送选择充值记录（只能查询到充值48小时内），系统自动判断赠送天数。\n      ")]):e._e(),e._v(" "),e.customTypeChecked?r("el-form-item",{attrs:{label:"充值天数",prop:"days"}},[r("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.days,callback:function(t){e.$set(e.ruleForm,"days",e._n(t))},expression:"ruleForm.days"}})],1):e._e(),e._v(" "),e.customTypeChecked?r("el-form-item",{attrs:{label:"充值金额",prop:"charge_value"}},[r("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.charge_value,callback:function(t){e.$set(e.ruleForm,"charge_value",e._n(t))},expression:"ruleForm.charge_value"}})],1):e._e(),e._v(" "),e.customTypeChecked?r("el-form-item",{attrs:{label:"是否VIP",prop:"fuzhu_vip"}},[r("el-radio",{attrs:{label:0,border:"",size:"mini"},model:{value:e.ruleForm.fuzhu_vip,callback:function(t){e.$set(e.ruleForm,"fuzhu_vip",t)},expression:"ruleForm.fuzhu_vip"}},[e._v("普通")]),e._v(" "),r("el-radio",{attrs:{label:1,border:"",size:"mini"},model:{value:e.ruleForm.fuzhu_vip,callback:function(t){e.$set(e.ruleForm,"fuzhu_vip",t)},expression:"ruleForm.fuzhu_vip"}},[e._v("VIP")]),e._v(" "),r("el-radio",{attrs:{label:10,border:"",size:"mini"},model:{value:e.ruleForm.fuzhu_vip,callback:function(t){e.$set(e.ruleForm,"fuzhu_vip",t)},expression:"ruleForm.fuzhu_vip"}},[e._v("原状")]),e._v(" "),r("div",{staticClass:"tips2"},[e._v("\n          保持原状就是不改变辅助VIP类型。\n          不要随意乱用自定义充值，否则将被取消该权限。\n        ")])],1):e._e(),e._v(" "),e.customTypeChecked?r("el-form-item",{attrs:{label:"备注",prop:"content"}},[r("el-input",{attrs:{rows:4,clearable:"",type:"textarea",placeholder:"自定义的类型必须输入原因"},model:{value:e.ruleForm.content,callback:function(t){e.$set(e.ruleForm,"content",t)},expression:"ruleForm.content"}})],1):e._e()],1),e._v(" "),r("div",{staticClass:"tips"},[e._v("\n      如果冲错了，直接撤销后再冲，撤销会恢复到充值前的状态； 赠送类型不会改变用户的VIP类型。\n    ")]),e._v(" "),r("div",{staticStyle:{"text-align":"center"}},[e.transferTypeChecked?r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.checkTransfer()}}},[e._v("查询费用")]):r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.queryUser()}}},[e._v("查询")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.parseUser()}}},[e._v("解析")]),e._v(" "),r("el-button",{attrs:{loading:e.chargeLoding,type:"primary"},on:{click:function(t){e.submitForm()}}},[e._v(e._s(e.transferTypeChecked?"转移":"充值"))])],1),e._v(" "),e.showResult?r("div",{staticClass:"result-wrap"},[r("div",{staticClass:"text-wrap"},e._l(e.result,function(t,a){return r("div",{key:a,staticClass:"line-item"},[e._v(e._s(t))])})),e._v(" "),r("div",{staticClass:"flex-button"},[r("el-button",{on:{click:function(t){e.clearResult()}}},[e._v("清空")]),e._v(" "),r("div",{staticClass:"right"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.copyResult()}}},[e._v("复制")])],1)],1)]):e._e()],1),e._v(" "),r("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{visible:e.centerDialog_post,title:"确认提交",width:"350px",center:""},on:{"update:visible":function(t){e.centerDialog_post=t}}},[e.transferTypeChecked?r("span",[e._v("转移后不可撤销，只能再次转移，是否转移？")]):r("span",[e._v("确认充值信息是否正确？")]),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:function(t){e.centerDialog_post=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.true_post}},[e._v("确 定")])],1)]),e._v(" "),r("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{visible:e.centerDialog_parse,title:"解析辅助ID",width:"350px",center:""},on:{"update:visible":function(t){e.centerDialog_parse=t}}},[r("el-input",{attrs:{rows:5,clearable:"",size:"mini",type:"textarea",placeholder:"将辅助上复制的内容粘贴到这里进行自动解析辅助ID和服务器ID"},model:{value:e.parseText,callback:function(t){e.parseText=t},expression:"parseText"}}),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"mini"},on:{click:function(t){e.centerDialog_parse=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.true_parse}},[e._v("确 定")])],1)],1),e._v(" "),r("AwardChargeModal",{ref:"AwardChargeModal",on:{ok:e.handleOk}})],1)},[],!1,null,"55e5ade3",null));g.options.__file="chargeHelper.vue";t.default=g.exports},"e+pk":function(e,t,r){"use strict";var a=r("OiJS");r.n(a).a},eivq:function(e,t,r){"use strict";r.d(t,"b",function(){return i}),r.d(t,"d",function(){return s}),r.d(t,"c",function(){return n}),r.d(t,"a",function(){return o});var a=r("t3Un");function i(e,t){return Object(a.a)({url:e,method:"get",params:t})}function s(e,t){return Object(a.a)({url:e,method:"post",data:t})}function n(e,t){return Object(a.a)({url:e,method:"patch",data:t})}function o(e,t){return Object(a.a)({url:e,method:"delete",data:t})}},nxq8:function(e,t,r){},pxQj:function(e,t,r){"use strict";var a=r("uDAT");r.n(a).a},rGxX:function(e,t,r){"use strict";var a=r("W839");r.n(a).a},uDAT:function(e,t,r){}}]);